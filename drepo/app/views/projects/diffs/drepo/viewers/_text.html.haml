- diff_file = viewer.diff_file
- blob = diff_file.blob
- total_lines = blob.lines.size
- total_lines -= 1 if total_lines > 0 && blob.lines.last.blank?
- if diff_view == :parallel
  = render "projects/diffs/drepo/parallel_view", diff_file: diff_file, total_lines: total_lines
- else
  = render "projects/diffs/drepo/text_file", diff_file: diff_file, total_lines: total_lines
